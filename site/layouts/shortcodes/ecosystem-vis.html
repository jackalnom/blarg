{{- $id := .Get "id" | default "ecosystem" -}}

<div class="ecosystem-params">
    <div class="ecosystem-param">
        <label>Cat Speed: <span id="{{ $id }}CatSpeedValue">1.5</span></label>
        <input type="range" id="{{ $id }}CatSpeed" min="0" max="2" step="0.1" value="1.5" class="ecosystem-slider">
    </div>
    <div class="ecosystem-param">
        <label>Mouse Speed: <span id="{{ $id }}MouseSpeedValue">1.0</span></label>
        <input type="range" id="{{ $id }}MouseSpeed" min="0" max="2" step="0.1" value="1.0" class="ecosystem-slider">
    </div>
    <div class="ecosystem-param">
        <label>Grass Growth: <span id="{{ $id }}GrassGrowthValue">1.0</span></label>
        <input type="range" id="{{ $id }}GrassGrowth" min="0" max="3" step="0.1" value="1.0" class="ecosystem-slider">
    </div>
    <div class="ecosystem-param">
        <label>Cat Vision: <span id="{{ $id }}VisionValue">10</span> cells</label>
        <input type="range" id="{{ $id }}Vision" min="1" max="30" step="1" value="10" class="ecosystem-slider">
    </div>
    <div class="ecosystem-param">
        <label>Mouse Reproduce: <span id="{{ $id }}MouseReproduceValue">5</span> grass</label>
        <input type="range" id="{{ $id }}MouseReproduce" min="1" max="30" step="1" value="5" class="ecosystem-slider">
    </div>
    <div class="ecosystem-param">
        <label>Cat Reproduce: <span id="{{ $id }}CatReproduceValue">15</span> mice</label>
        <input type="range" id="{{ $id }}CatReproduce" min="1" max="30" step="1" value="15" class="ecosystem-slider">
    </div>
    <div class="ecosystem-param">
        <label>Starve After: <span id="{{ $id }}StarvationValue">50</span> turns</label>
        <input type="range" id="{{ $id }}Starvation" min="10" max="200" step="10" value="50" class="ecosystem-slider">
    </div>
</div>

<div class="ecosystem-controls">
    <button id="{{ $id }}Step">Step</button>
    <button id="{{ $id }}Run">Run</button>
    <button id="{{ $id }}Reset" class="sim-reset-btn">Reset</button>
</div>

<div class="ecosystem-container">
    <div class="ecosystem-grid">
        <canvas id="{{ $id }}Canvas" class="ecosystem-canvas"></canvas>
    </div>
    <div class="ecosystem-chart">
        <div style="margin-bottom: 8px;">
            <label>
                <input type="checkbox" id="{{ $id }}LogScale">
                Log scale
            </label>
        </div>
        <canvas id="{{ $id }}Chart" class="ecosystem-chart-canvas"></canvas>
    </div>
</div>

<script type="module">
    import { initEcosystem } from "/js/teaching-visuals.js";
    initEcosystem({
        canvasId: "{{ $id }}Canvas",
        chartId: "{{ $id }}Chart",
        stepId: "{{ $id }}Step",
        runId: "{{ $id }}Run",
        resetId: "{{ $id }}Reset",
        logScaleId: "{{ $id }}LogScale",
        catSpeedId: "{{ $id }}CatSpeed",
        catSpeedValueId: "{{ $id }}CatSpeedValue",
        mouseSpeedId: "{{ $id }}MouseSpeed",
        mouseSpeedValueId: "{{ $id }}MouseSpeedValue",
        grassGrowthId: "{{ $id }}GrassGrowth",
        grassGrowthValueId: "{{ $id }}GrassGrowthValue",
        visionId: "{{ $id }}Vision",
        visionValueId: "{{ $id }}VisionValue",
        mouseReproduceId: "{{ $id }}MouseReproduce",
        mouseReproduceValueId: "{{ $id }}MouseReproduceValue",
        catReproduceId: "{{ $id }}CatReproduce",
        catReproduceValueId: "{{ $id }}CatReproduceValue",
        starvationId: "{{ $id }}Starvation",
        starvationValueId: "{{ $id }}StarvationValue"
    });
</script>
