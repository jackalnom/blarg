{{- /* Force rebuild */ -}}
{{- $base := .Get "id" | default "dag" -}}
{{- $structure := .Get "structure" | default "chain" -}}

<div id="{{ $base }}Weights" class="dag-weights"></div>

<div class="sim-controls">
    <button id="{{ $base }}Step">Step</button>
    <button id="{{ $base }}Run">Run</button>
    <button id="{{ $base }}Reset" class="sim-reset-btn">Reset</button>
</div>

<div id="{{ $base }}Correlation" class="dag-correlation"></div>
<div class="dag-container">
    <canvas id="{{ $base }}Canvas" class="dag-canvas"></canvas>
</div>
<script type="module">
    import { initDAG } from "/js/teaching-visuals.js";
    initDAG({
        canvasId: "{{ $base }}Canvas",
        structure: "{{ $structure }}",
        correlationId: "{{ $base }}Correlation",
        weightsId: "{{ $base }}Weights",
        stepId: "{{ $base }}Step",
        runId: "{{ $base }}Run",
        resetId: "{{ $base }}Reset"
    });
</script>