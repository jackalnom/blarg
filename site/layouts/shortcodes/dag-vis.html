{{- /* Force rebuild */ -}}
{{- $base := .Get "id" | default "dag" -}}
{{- $structure := .Get "structure" | default "chain" -}}

<div id="{{ $base }}Weights" class="dag-weights"></div>

<div class="sim-controls">
    <button id="{{ $base }}Step">Step</button>
    <button id="{{ $base }}Run">Run</button>
    <button id="{{ $base }}Reset" class="sim-reset-btn">Reset</button>
</div>

<div id="{{ $base }}Correlation" class="dag-correlation"></div>
<div class="berkson-dag">
    <canvas id="{{ $base }}DAG" class="berkson-dag-canvas"></canvas>
</div>

<div class="berkson-charts">
    <div class="berkson-chart">
        <canvas id="{{ $base }}Scatter" class="berkson-scatter-canvas"></canvas>
    </div>
</div>

<script type="module">
    import { initDAG } from "/js/teaching-visuals.js";
    initDAG({
        dagCanvasId: "{{ $base }}DAG",
        scatterCanvasId: "{{ $base }}Scatter",
        structure: "{{ $structure }}",
        correlationId: "{{ $base }}Correlation",
        weightsId: "{{ $base }}Weights",
        stepId: "{{ $base }}Step",
        runId: "{{ $base }}Run",
        resetId: "{{ $base }}Reset"
    });
</script>